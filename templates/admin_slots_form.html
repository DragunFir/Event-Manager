{% extends "base.html" %}
{% block title %}Schichten bearbeiten - Event-Manager{% endblock %}

{% block body %}
<div class="container no-print">
    <h1>Schichten für: {{ event.title }}</h1>

    <h2>Neue Schicht hinzufügen</h2>
    <form method="post" action="/admin/events/{{ event.id }}/slots/add" class="inline-form">
        <input type="text" name="label" placeholder="Bezeichnung (z.B. Aufbau)" required>
        <input type="date" name="date_str" required>
        <input type="time" name="time_start" required>
        <input type="time" name="time_end" required>
        <button type="submit">Hinzufügen</button>
    </form>

    <h2>Vorhandene Schichten</h2>
    {% if slots %}
    <div class="table-wrapper">
        <table class="table">
            <thead>
            <tr>
                <th>Datum</th>
                <th>Zeit</th>
                <th>Bezeichnung</th>
                <th>Aktionen</th>
            </tr>
            </thead>
            <tbody>
            {% for s in slots %}
            <tr>
                <td>{{ s.date }}</td>
                <td>{{ "%02d:%02d"|format(s.time_start.hour, s.time_start.minute) }} –
                    {{ "%02d:%02d"|format(s.time_end.hour, s.time_end.minute) }}</td>
                <td>{{ s.label }}</td>
                <td>
                    <form method="post" action="/admin/events/{{ event.id }}/slots/{{ s.id }}/delete"
                          onsubmit="return confirm('Schicht löschen?');">
                        <button type="submit" class="link-button">Löschen</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <p>Noch keine Schichten angelegt.</p>
    {% endif %}

    <p><a href="/admin/events/{{ event.id }}/edit">&larr; Zurück zum Event</a></p>
</div>
{% endblock %}
